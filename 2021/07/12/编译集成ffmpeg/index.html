<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>编译集成ffmpeg | Learn OS concepts by coding them!</title><meta name="keywords" content="NDK,ffmpeg"><meta name="author" content="Jack Ou"><meta name="copyright" content="Jack Ou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="此笔记记录ffmpeg编译集成过程">
<meta property="og:type" content="article">
<meta property="og:title" content="编译集成ffmpeg">
<meta property="og:url" content="https://oujie123.github.io/2021/07/12/%E7%BC%96%E8%AF%91%E9%9B%86%E6%88%90ffmpeg/index.html">
<meta property="og:site_name" content="Learn OS concepts by coding them!">
<meta property="og:description" content="此笔记记录ffmpeg编译集成过程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="article:published_time" content="2021-07-11T16:59:20.000Z">
<meta property="article:modified_time" content="2021-07-28T18:29:52.520Z">
<meta property="article:author" content="Jack Ou">
<meta property="article:tag" content="NDK">
<meta property="article:tag" content="ffmpeg">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><link rel="shortcut icon" href="https://upload-images.jianshu.io/upload_images/13838098-8a5cd66eafd7c761.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><link rel="canonical" href="https://oujie123.github.io/2021/07/12/%E7%BC%96%E8%AF%91%E9%9B%86%E6%88%90ffmpeg/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Jack Ou","link":"链接: ","source":"来源: Learn OS concepts by coding them!","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-07-29 02:29:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://upload-images.jianshu.io/upload_images/13838098-a7dfe0e9d3ed649c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">168</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">120</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分栏</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Learn OS concepts by coding them!</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分栏</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">编译集成ffmpeg</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-11T16:59:20.000Z" title="发表于 2021-07-12 00:59:20">2021-07-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-07-28T18:29:52.520Z" title="更新于 2021-07-29 02:29:52">2021-07-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/NDK/">NDK</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h4 id="1-下载ffmpeg"><a href="#1-下载ffmpeg" class="headerlink" title="1.下载ffmpeg"></a>1.下载ffmpeg</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.ffmpeg.org/releases/ffmpeg-4.0.2.tar.bz2</span><br><span class="line">tar -xjf ffmpeg-4.0.2.tar.bz2</span><br></pre></td></tr></table></figure>


<h4 id="2-编译选项说明"><a href="#2-编译选项说明" class="headerlink" title="2.编译选项说明"></a>2.编译选项说明</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 保存选项到本地</span></span><br><span class="line">./configure --help -&gt; ffmpeg_help.txt</span><br><span class="line"></span><br><span class="line">Help options: </span><br><span class="line">–help print this message # 帮助选项 </span><br><span class="line">–quiet Suppress showing informative output # 信息输出显示 </span><br><span class="line">–list-decoders show all available decoders # 可用解码器 </span><br><span class="line">–list-encoders show all available encoders # 可用编码器 </span><br><span class="line">–list-hwaccels show all available hardware accelerators # 可用硬件编解码器 </span><br><span class="line">–list-demuxers show all available demuxers # 可用解复用 </span><br><span class="line">–list-muxers show all available muxers # 可用复用器 </span><br><span class="line">–list-parsers show all available parsers # 可用解析器 </span><br><span class="line">–list-protocols show all available protocols # 可用协议 </span><br><span class="line">–list-bsfs show all available bitstream filters # 可用比特流过滤器 </span><br><span class="line">–list-indevs show all available input devices # 可用输入设备 </span><br><span class="line">–list-outdevs show all available output devices # 可用输出设备 </span><br><span class="line">–list-filters show all available filters # 可用过滤器 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">一般选项</span> </span><br><span class="line">Standard options: </span><br><span class="line">–logfile=FILE log tests and output to FILE [config.log] # 生成指定的log文件 </span><br><span class="line">–disable-logging do not log configure debug information # 禁止调试信息 </span><br><span class="line">–fatal-warnings fail if any configure warning is generated # 任何警告则失败 </span><br><span class="line">–prefix=PREFIX install in PREFIX [$prefix_default] # 安装目录 </span><br><span class="line">–bindir=DIR install binaries in DIR [PREFIX/bin] # exe和dll安装目录 </span><br><span class="line">–datadir=DIR install data files in DIR [PREFIX/share/ffmpeg] # 数据安装目录 </span><br><span class="line">–docdir=DIR install documentation in DIR [PREFIX/share/doc/ffmpeg]# 文档安装目录 –libdir=DIR install libs in DIR [PREFIX/lib] # 静态库安装目录 </span><br><span class="line">–shlibdir=DIR install shared libs in DIR [LIBDIR] # 共享库安装目录 </span><br><span class="line">–incdir=DIR install includes in DIR [PREFIX/include] # 头文件安装目录 </span><br><span class="line">–mandir=DIR install man page in DIR [PREFIX/share/man] # 帮助文档安装目录 </span><br><span class="line">–pkgconfigdir=DIR install pkg-config files in DIR [LIBDIR/pkgconfig] # pkg- config安装目录 </span><br><span class="line">–enable-rpath use rpath to allow installing libraries in paths # 调用程序所用目录 not part of the dynamic linker search path </span><br><span class="line">use rpath when linking programs (USE WITH CARE) </span><br><span class="line">–install-name-dir=DIR Darwin directory name for installed targets </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 许可选项</span> </span><br><span class="line">Licensing options: </span><br><span class="line">–enable-gpl allow use of GPL code, the resulting libs # 允许使用GPL </span><br><span class="line">and binaries will be under GPL [no] </span><br><span class="line">–enable-version3 upgrade (L)GPL to version 3 [no] # 更新GPL版本 </span><br><span class="line">–enable-nonfree allow use of nonfree code, the resulting libs # 允许使用非免费程序 and binaries will be unredistributable [no] </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置选项</span> </span><br><span class="line">Configuration options: </span><br><span class="line">–disable-static do not build static libraries [no] # 禁止静态库 </span><br><span class="line">–enable-shared build shared libraries [no] # 启用共享库 </span><br><span class="line">–enable-small optimize for size instead of speed # 启用最小尺寸而非速度</span><br><span class="line">–disable-runtime-cpudetect disable detecting CPU capabilities at runtime (smaller binary) # 禁用实时的CPU效率检测 </span><br><span class="line">–enable-gray enable full grayscale support (slower color) # 启用灰度(颜色、空间转换) –disable-swscale-alpha disable alpha channel support in swscale # 禁用swscale中的 透明度 </span><br><span class="line">–disable-all disable building components, libraries and programs # 禁用所有，包括组 件、库、程序 </span><br><span class="line">–enable-raise-major increase major version numbers in sonames [no] # 提升版本号 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 项目选项</span> </span><br><span class="line">Program options: </span><br><span class="line">–disable-programs do not build command line programs # 禁止生成所有exe </span><br><span class="line">–disable-ffmpeg disable ffmpeg build # 禁止生成ffmpeg.exe </span><br><span class="line">–disable-ffplay disable ffplay build # 禁止生成ffplay.exe </span><br><span class="line">–disable-ffprobe disable ffprobe build # 禁止生成ffprobe.exe </span><br><span class="line">–disable-ffserver disable ffserver build # 禁止生成ffserver.exe </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 文档选项</span> </span><br><span class="line">Documentation options: </span><br><span class="line">–disable-doc do not build documentation # 禁止生成doc文件 </span><br><span class="line">–disable-htmlpages do not build HTML documentation pages # 禁止生成HTML文档页 </span><br><span class="line">–disable-manpages do not build man documentation pages # 禁止生成帮助文档页 </span><br><span class="line">–disable-podpages do not build POD documentation pages # 禁止生成POD文档页 </span><br><span class="line">–disable-txtpages do not build text documentation pages # 禁止生成txt文档页 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 组件选项</span> </span><br><span class="line">Component options: </span><br><span class="line">–disable-avdevice disable libavdevice build # 禁止libavdevice构造 </span><br><span class="line">–disable-avcodec disable libavcodec build # 禁止libavcodec构造 </span><br><span class="line">–disable-avformat disable libavformat build # 禁止libavformat构造 </span><br><span class="line">–disable-swresample disable libswresample build # 禁止libswresample构造 </span><br><span class="line">–disable-swscale disable libswscale build # 禁止libswscale构造 </span><br><span class="line">–disable-postproc disable libpostproc build # 禁止libpostproc构造 </span><br><span class="line">–disable-avfilter disable libavfilter build # 禁止libavfilter构造 </span><br><span class="line">–enable-avresample enable libavresample build [no] # 允许libavresample构造 </span><br><span class="line">–disable-pthreads disable pthreads [autodetect] # 禁止pthread构造 </span><br><span class="line">–disable-w32threads disable Win32 threads [autodetect] # 禁止使用win32线程 </span><br><span class="line">–disable-os2threads disable OS/2 threads [autodetect] # 禁止使用OS/2线程 </span><br><span class="line">–disable-network disable network support [no] # 禁止网络支持 </span><br><span class="line">–disable-dct disable DCT code # 禁止DCT代码 </span><br><span class="line">–disable-dwt disable DWT code # 禁止DWT代码 </span><br><span class="line">–disable-error-resilience disable error resilience code # 禁止纠错 </span><br><span class="line">–disable-lsp disable LSP code # 禁止行同步脉冲 </span><br><span class="line">–disable-lzo disable LZO decoder code # 禁止LZO压缩编码 </span><br><span class="line">–disable-mdct disable MDCT code # 禁止修正离散余弦变换 </span><br><span class="line">–disable-rdft disable RDFT code # 禁止实数离散傅里叶变换 </span><br><span class="line">–disable-fft disable FFT code # 禁止快速傅氏变换算法 </span><br><span class="line">–disable-faan disable floating point AAN (I)DCT code # 禁止AAN DCT变换 </span><br><span class="line">–disable-pixelutils disable pixel utils in libavutil # 禁用avutil中的像素单元 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 单个组件选项</span> </span><br><span class="line">Individual component options: </span><br><span class="line">–disable-everything disable all components listed below # 禁用下面已列出的全部组件 –disable-encoder=NAME disable encoder NAME # 禁用指定的编码器 </span><br><span class="line">–enable-encoder=NAME enable encoder NAME # 启用指定的编码器 </span><br><span class="line">–disable-encoders disable all encoders # 禁用所有的编码器 </span><br><span class="line">–disable-decoder=NAME disable decoder NAME # 禁用指定的解码器 </span><br><span class="line">–enable-decoder=NAME enable decoder NAME # 启用指定的解码器</span><br><span class="line">–disable-decoders disable all decoders # 禁用所有的解码器 </span><br><span class="line">–disable-hwaccel=NAME disable hwaccel NAME # 禁用指定的硬件加速 </span><br><span class="line">–enable-hwaccel=NAME enable hwaccel NAME # 启用指定的硬件加速 </span><br><span class="line">–disable-hwaccels disable all hwaccels # 禁用全部的硬件加速 </span><br><span class="line">–disable-muxer=NAME disable muxer NAME # 禁用指定的混合器 </span><br><span class="line">–enable-muxer=NAME enable muxer NAME # 启用指定的混合器 </span><br><span class="line">–disable-muxers disable all muxers # 禁用所有的混合器 </span><br><span class="line">–disable-demuxer=NAME disable demuxer NAME # 禁用指定的解复用器 </span><br><span class="line">–enable-demuxer=NAME enable demuxer NAME # 启用指定的解复用器 </span><br><span class="line">–disable-demuxers disable all demuxers # 禁用所有的解复用器 </span><br><span class="line">–enable-parser=NAME enable parser NAME # 启用指定的分析器 </span><br><span class="line">–disable-parser=NAME disable parser NAME # 禁用指定的分析器 </span><br><span class="line">–disable-parsers disable all parsers # 禁用所有的分析器 </span><br><span class="line">–enable-bsf=NAME enable bitstream filter NAME # 启用指定的流过滤器 </span><br><span class="line">–disable-bsf=NAME disable bitstream filter NAME # 禁用指定的流过滤器 </span><br><span class="line">–disable-bsfs disable all bitstream filters # 禁用所有的流过滤器 </span><br><span class="line">–enable-protocol=NAME enable protocol NAME # 启用指定的协议 </span><br><span class="line">–disable-protocol=NAME disable protocol NAME # 禁用指定的协议 </span><br><span class="line">–disable-protocols disable all protocols # 禁用所有的协议 </span><br><span class="line">–enable-indev=NAME enable input device NAME # 启用指定的输入设备 </span><br><span class="line">–disable-indev=NAME disable input device NAME # 禁用指定的输入设备 </span><br><span class="line">–disable-indevs disable input devices # 禁用输入设备 </span><br><span class="line">–enable-outdev=NAME enable output device NAME # 启用指定的输出设备 </span><br><span class="line">–disable-outdev=NAME disable output device NAME# 禁用指定的输出设备 </span><br><span class="line">–disable-outdevs disable output devices # 禁用输出设备 </span><br><span class="line">–disable-devices disable all devices # 禁用所有设备 </span><br><span class="line">–enable-filter=NAME enable filter NAME # 启用指定的过滤器 </span><br><span class="line">–disable-filter=NAME disable filter NAME # 禁用指定的过滤器 </span><br><span class="line">–disable-filters disable all filters # 禁用所有的过滤器 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加依赖库支持</span> </span><br><span class="line">External library support: </span><br><span class="line">Using any of the following switches will allow FFmpeg to link to the corresponding external library. All the components depending on that library will become enabled, if all their other dependencies are met and they are not explicitly disabled. E.g. –enable-libwavpack will enable linking to libwavpack and allow the libwavpack encoder to be built, unless it is specifically disabled with  –disable-encoder=libwavpack.</span><br><span class="line">Note that only the system libraries are auto-detected. All the other external libraries must be explicitly enabled. </span><br><span class="line">Also note that the following help text describes the purpose of the libraries themselves, not all their features will necessarily be usable by FFmpeg. </span><br><span class="line">–enable-avisynth enable reading of AviSynth script files [no] # 启用读取AVISynth脚 本文件 </span><br><span class="line">–disable-bzlib disable bzlib [autodetect] # 启用bzlib </span><br><span class="line">–enable-chromaprint enable audio fingerprinting with chromaprint [no] # 启用音频指 纹技术 </span><br><span class="line">–enable-frei0r enable frei0r video filtering [no] # 启用frei0r视频筛选 </span><br><span class="line">–enable-gcrypt enable gcrypt, needed for rtmp(t)e support # 启用加密 </span><br><span class="line">if openssl, librtmp or gmp is not used [no] </span><br><span class="line">–enable-gmp enable gmp, needed for rtmp(t)e support # 启用gmp </span><br><span class="line">if openssl or librtmp is not used [no] </span><br><span class="line">–enable-gnutls enable gnutls, needed for https support # 启用gnutls </span><br><span class="line">if openssl is not used [no]</span><br><span class="line">–disable-iconv disable iconv [autodetect] # 禁用iconv </span><br><span class="line">–enable-jni enable JNI support [no] # 启用JNI支持 </span><br><span class="line">–enable-ladspa enable LADSPA audio filtering [no] # 启用LADSPA音频过滤 </span><br><span class="line">–enable-libass enable libass subtitles rendering, # 启用libass </span><br><span class="line">needed for subtitles and ass filter [no] </span><br><span class="line">–enable-libbluray enable BluRay reading using libbluray [no] # 启用libbluray </span><br><span class="line">–enable-libbs2b enable bs2b DSP library [no] # 启用bs2b DSP库 </span><br><span class="line">–enable-libcaca enable textual display using libcaca [no] # 启用libcaca用于文本显示 –enable-libcelt enable CELT decoding via libcelt [no] # 启用CEKT解码 </span><br><span class="line">–enable-libcdio enable audio CD grabbing with libcdio [no] # 通过libcdio启用音频CD –enable-libdc1394 enable IIDC-1394 grabbing using libdc1394 # 启用libdc1394 </span><br><span class="line">and libraw1394 [no] </span><br><span class="line">–enable-libfdk-aac enable AAC de/encoding via libfdk-aac [no] # 启用libfdk-aac解 码/编码 </span><br><span class="line">–enable-libflite enable flite (voice synthesis) support via libflite [no] # 启用 libflite </span><br><span class="line">–enable-libfontconfig enable libfontconfig, useful for drawtext filter [no] # 启 用libfontconfig </span><br><span class="line">–enable-libfreetype enable libfreetype, needed for drawtext filter [no]# 启用 libfreetype </span><br><span class="line">–enable-libfribidi enable libfribidi, improves drawtext filter [no] # 启用 libfribidi，改善绘画过滤 </span><br><span class="line">–enable-libgme enable Game Music Emu via libgme [no] # 启用libgme </span><br><span class="line">–enable-libgsm enable GSM de/encoding via libgsm [no] # 启用libgsm做GSM编/解码 </span><br><span class="line">–enable-libiec61883 enable iec61883 via libiec61883 [no] # 启用libiec61883 </span><br><span class="line">–enable-libilbc enable iLBC de/encoding via libilbc [no] # 启用libilbc做iLBC编/解码 –enable-libkvazaar enable HEVC encoding via libkvazaar [no] # 启用libkvazaar做HEVC 编码 </span><br><span class="line">–enable-libmodplug enable ModPlug via libmodplug [no] # 启用ModPlug通过libmodplug –enable-libmp3lame enable MP3 encoding via libmp3lame [no] # 启用MP3编码通过 </span><br><span class="line">libmp3lame </span><br><span class="line">–enable-libnut enable NUT (de)muxing via libnut, # 启用NUT解复用通过libnut </span><br><span class="line">native (de)muxer exists [no] </span><br><span class="line">–enable-libopencore-amrnb enable AMR-NB de/encoding via libopencore-amrnb [no] # 启用ARN-NB解/编码 </span><br><span class="line">–enable-libopencore-amrwb enable AMR-WB decoding via libopencore-amrwb [no] # 启 用ARM-WB解码 </span><br><span class="line">–enable-libopencv enable video filtering via libopencv [no] # 启用视频过滤通过 opencv </span><br><span class="line">–enable-libopenh264 enable H.264 encoding via OpenH264 [no] # 启用H.264编码 </span><br><span class="line">–enable-libopenjpeg enable JPEG 2000 de/encoding via OpenJPEG [no] # 启用JPEG编解 码 </span><br><span class="line">–enable-libopenmpt enable decoding tracked files via libopenmpt [no] # 启用解码文件 通过libopenmpt </span><br><span class="line">–enable-libopus enable Opus de/encoding via libopus [no] # 启用Oplus编解码 </span><br><span class="line">–enable-libpulse enable Pulseaudio input via libpulse [no] # 启用Pulse输入 </span><br><span class="line">–enable-librubberband enable rubberband needed for rubberband filter [no] # 启用 rubberband </span><br><span class="line">–enable-librtmp enable RTMP[E] support via librtmp [no] # 启用RTMP支持通过librtmp –enable-libschroedinger enable Dirac de/encoding via libschroedinger [no] # 启用 Dirac编解码通过libschroedinger </span><br><span class="line">–enable-libshine enable fixed-point MP3 encoding via libshine [no] # 启用libshine 固定MP3点 </span><br><span class="line">–enable-libsmbclient enable Samba protocol via libsmbclient [no] # 启用Samba协议 –enable-libsnappy enable Snappy compression, needed for hap encoding [no] # 启用 Snappy压缩 </span><br><span class="line">–enable-libsoxr enable Include libsoxr resampling [no] # 启用libsoxr采样 </span><br><span class="line">–enable-libspeex enable Speex de/encoding via libspeex [no] # 启用Speex编解码</span><br><span class="line">–enable-libssh enable SFTP protocol via libssh [no] # 启用SFTP协议 </span><br><span class="line">–enable-libtesseract enable Tesseract, needed for ocr filter [no] # 启用Tesseract –enable-libtheora enable Theora encoding via libtheora [no] # 启用Theora编码 </span><br><span class="line">–enable-libtwolame enable MP2 encoding via libtwolame [no] # 启用MP2编码 </span><br><span class="line">–enable-libv4l2 enable libv4l2/v4l-utils [no] # 启用libv412 </span><br><span class="line">–enable-libvidstab enable video stabilization using vid.stab [no] # 启用 libvidstab </span><br><span class="line">–enable-libvo-amrwbenc enable AMR-WB encoding via libvo-amrwbenc [no] # 启用AMR- WB </span><br><span class="line">–enable-libvorbis enable Vorbis en/decoding via libvorbis, # 启用Vorbis编解码 native implementation exists [no] </span><br><span class="line">–enable-libvpx enable VP8 and VP9 de/encoding via libvpx [no] # 启用VP8/VP9编解码 –enable-libwavpack enable wavpack encoding via libwavpack [no] # 启用wavpack编码 –enable-libwebp enable WebP encoding via libwebp [no] # 启用WbebP编码 </span><br><span class="line">–enable-libx264 enable H.264 encoding via x264 [no] # 启用H.264编码 </span><br><span class="line">–enable-libx265 enable HEVC encoding via x265 [no] # 启用HEVC编码 </span><br><span class="line">–enable-libxavs enable AVS encoding via xavs [no] # 启用AVS编码 </span><br><span class="line">–enable-libxcb enable X11 grabbing using XCB [autodetect] # 启用X11 </span><br><span class="line">–enable-libxcb-shm enable X11 grabbing shm communication [autodetect] # 启用X11 –enable-libxcb-xfixes enable X11 grabbing mouse rendering [autodetect] # 启用X11 –enable-libxcb-shape enable X11 grabbing shape rendering [autodetect] # 启用X11 –enable-libxvid enable Xvid encoding via xvidcore, # 启用Xvid编码 </span><br><span class="line">native MPEG-4/Xvid encoder exists [no] </span><br><span class="line">–enable-libzimg enable z.lib, needed for zscale filter [no] # 启用z.lib </span><br><span class="line">–enable-libzmq enable message passing via libzmq [no] # 启用消息传递通过libzmq </span><br><span class="line">–enable-libzvbi enable teletext support via libzvbi [no] # 启用文本支持 </span><br><span class="line">–disable-lzma disable lzma [autodetect] # 禁用lzma </span><br><span class="line">–enable-decklink enable Blackmagic DeckLink I/O support [no] # 启用阻塞IO支持 </span><br><span class="line">–enable-mediacodec enable Android MediaCodec support [no] # 启用安卓MediaCodec支持 –enable-netcdf enable NetCDF, needed for sofalizer filter [no] # 启用NetCDF </span><br><span class="line">–enable-openal enable OpenAL 1.1 capture support [no] # 启用OpenAL1.1采集支持 </span><br><span class="line">–enable-opencl enable OpenCL code # 启用OpenCL代码 </span><br><span class="line">–enable-opengl enable OpenGL rendering [no] # 启用OpenGL </span><br><span class="line">–enable-openssl enable openssl, needed for https support # 启用openssl，需支持https if gnutls is not used [no] </span><br><span class="line">–disable-schannel disable SChannel SSP, needed for TLS support on # 启用SSP Windows if openssl and gnutls are not used [autodetect] </span><br><span class="line">–disable-sdl2 disable sdl2 [autodetect] # 禁用sdl2 </span><br><span class="line">–disable-securetransport disable Secure Transport, needed for TLS support # 禁用安 全传输 </span><br><span class="line">on OSX if openssl and gnutls are not used [autodetect] </span><br><span class="line">–disable-xlib disable xlib [autodetect] # 禁用xlib </span><br><span class="line">–disable-zlib disable zlib [autodetect] # 禁用zlib </span><br><span class="line">The following libraries provide various hardware acceleration features: </span><br><span class="line">–disable-audiotoolbox disable Apple AudioToolbox code [autodetect] # 禁用苹果音频工 具箱 </span><br><span class="line">–disable-cuda disable dynamically linked Nvidia CUDA code [autodetect] # 禁用CUDA 编程 </span><br><span class="line">–disable-cuvid disable Nvidia CUVID support [autodetect] # 启用Nvidia CUVID </span><br><span class="line">–disable-d3d11va disable Microsoft Direct3D 11 video acceleration code </span><br><span class="line">[autodetect] # 禁用微软Direct3D 11视频加速 </span><br><span class="line">–disable-dxva2 disable Microsoft DirectX 9 video acceleration code [autodetect] # 禁用微软錎irectX视频加速 </span><br><span class="line">–enable-libmfx enable Intel MediaSDK (AKA Quick Sync Video) code via libmfx [no] # 启用Intel音频SDk </span><br><span class="line">–enable-libnpp enable Nvidia Performance Primitives-based code [no] # 启用Nvidia性 能代码</span><br><span class="line">–enable-mmal enable Broadcom Multi-Media Abstraction Layer (Raspberry Pi) via MMAL [no] # 启用网络多媒体结构层 </span><br><span class="line">–disable-nvenc disable Nvidia video encoding code [autodetect] # 禁用Nvidia视频编码 –enable-omx enable OpenMAX IL code [no] # 启用OpenMAX IL代码 </span><br><span class="line">–enable-omx-rpi enable OpenMAX IL code for Raspberry Pi [no] # 启用OpenMAX IL代码 –disable-vaapi disable Video Acceleration API (mainly Unix/Intel) code </span><br><span class="line">[autodetect] # 禁用视频加速API </span><br><span class="line">–disable-vda disable Apple Video Decode Acceleration code [autodetect] # 禁用苹果 视频解码加速代码 </span><br><span class="line">–disable-vdpau disable Nvidia Video Decode and Presentation API for Unix code </span><br><span class="line">[autodetect] # 禁用Nvidia视频编码和表达API </span><br><span class="line">–disable-videotoolbox disable VideoToolbox code [autodetect] # 禁用视频工具箱代码 编译工具选项 </span><br><span class="line">Toolchain options: </span><br><span class="line">–arch=ARCH select architecture [$arch] # 选择架构 </span><br><span class="line">–cpu=CPU select the minimum required CPU (affects instruction selection, may crash on older CPUs) # 选择CPU </span><br><span class="line">–cross-prefix=PREFIX use PREFIX for compilation tools [$cross_prefix] # 交叉编译工 具目录 </span><br><span class="line">–progs-suffix=SUFFIX program name suffix [] # 程序后缀名 </span><br><span class="line">–enable-cross-compile assume a cross-compiler is used # 启用交叉编译 </span><br><span class="line">–sysroot=PATH root of cross-build tree # 交叉编译根目录 </span><br><span class="line">–sysinclude=PATH location of cross-build system headers # 交叉编译头文件目录 </span><br><span class="line">–target-os=OS compiler targets OS [$target_os] # 交叉编译的目标系统 </span><br><span class="line">–target-exec=CMD command to run executables on target # 交叉编译启动程序命令 </span><br><span class="line">–target-path=DIR path to view of build directory on target # 交叉编译的安装目录 </span><br><span class="line">–target-samples=DIR path to samples directory on target # 交叉编译samples存放目录 –tempprefix=PATH force fixed dir/prefix instead of mktemp for checks # 交叉编译的 temp目录 </span><br><span class="line">–toolchain=NAME set tool defaults according to NAME # 编译工具 </span><br><span class="line">–nm=NM use nm tool NM [$nm_default] </span><br><span class="line">–ar=AR use archive tool AR [$ar_default] </span><br><span class="line">–as=AS use assembler AS [$as_default] </span><br><span class="line">–ln_s=LN_S use symbolic link tool LN_S [$ln_s_default] </span><br><span class="line">–strip=STRIP use strip tool STRIP [$strip_default] </span><br><span class="line">–windres=WINDRES use windows resource compiler WINDRES [$windre_default] </span><br><span class="line">–yasmexe=EXE use yasm-compatible assembler EXE [$yasmexe_default]# 使用yasm编译 –cc=CC use C compiler CC [$cc_default] # 使用gcc编译 </span><br><span class="line">–cxx=CXX use C compiler CXX [$cxx_default] # 使用g++编译 </span><br><span class="line">–objcc=OCC use ObjC compiler OCC [$cc_default] # 使用object C编译工具occ编译 </span><br><span class="line">–dep-cc=DEPCC use dependency generator DEPCC [$cc_default] # 使用依赖生成DEPCC </span><br><span class="line">–ld=LD use linker LD [$ld_default] # 使用连接LD </span><br><span class="line">–pkg-config=PKGCONFIG use pkg-config tool PKGCONFIG [$pkg_config_default] # 使用 pkg-config工具 </span><br><span class="line">–pkg-config-flags=FLAGS pass additional flags to pkgconf [] # 传递额外标志到pkg- config </span><br><span class="line">–ranlib=RANLIB use ranlib RANLIB [$ranlib_default] # 使用RANLIB </span><br><span class="line">–doxygen=DOXYGEN use DOXYGEN to generate API doc [$doxygen_default] # 生成doxygen 文档 </span><br><span class="line">–host-cc=HOSTCC use host C compiler HOSTCC # 使用HOST c编译 </span><br><span class="line">–host-cflags=HCFLAGS use HCFLAGS when compiling for host # 使用HCFLAGS </span><br><span class="line">–host-cppflags=HCPPFLAGS use HCPPFLAGS when compiling for host # 使用HCPPFLAGSS –host-ld=HOSTLD use host linker HOSTLD # 使用host连接器 </span><br><span class="line">–host-ldflags=HLDFLAGS use HLDFLAGS when linking for host # 使用HLDFLAGS </span><br><span class="line">–host-libs=HLIBS use libs HLIBS when linking for host # 使用HLIBS </span><br><span class="line">–host-os=OS compiler host OS [$target_os] # 编译主机系统 </span><br><span class="line">–extra-cflags=ECFLAGS add ECFLAGS to CFLAGS [$CFLAGS] # 添加ECFLAGS到CFLAGS</span><br><span class="line">–extra-cxxflags=ECFLAGS add ECFLAGS to CXXFLAGS [$CXXFLAGS] # 添加ECFLAGS到 CXXFLAGS </span><br><span class="line">–extra-objcflags=FLAGS add FLAGS to OBJCFLAGS [$CFLAGS] # 添加FLAGS到OBJCFLAGS –extra-ldflags=ELDFLAGS add ELDFLAGS to LDFLAGS [\$LDFLAGS] # 添加ELDFLAGS到 LDFLAGS </span><br><span class="line">–extra-ldexeflags=ELDFLAGS add ELDFLAGS to LDEXEFLAGS [\$LDEXEFLAGS] # 添加 ELDFLAGS到LDEXEFLAGS </span><br><span class="line">–extra-ldlibflags=ELDFLAGS add ELDFLAGS to LDLIBFLAGS [\$LDLIBFLAGS] # 添加 ELDFLAGS到LDLIBFLAGS </span><br><span class="line">–extra-libs=ELIBS add ELIBS [\$ELIBS] # 添加ELIBS </span><br><span class="line">–extra-version=STRING version string suffix [] # 添加版本 </span><br><span class="line">–optflags=OPTFLAGS override optimization-related compiler flags # 重写优化编译标志 –build-suffix=SUFFIX library name suffix [] # 添加库名字路径 </span><br><span class="line">–enable-pic build position-independent code # 添加位置独立代码 </span><br><span class="line">–enable-thumb compile for Thumb instruction set # 编译錞humb指令集 </span><br><span class="line">–enable-lto use link-time optimization # 使用连接时优化 </span><br><span class="line">–env=”ENV=override” override the environment variables # 重写环境变量 </span><br><span class="line">高级选项 </span><br><span class="line">Advanced options (experts only): </span><br><span class="line">–malloc-prefix=PREFIX prefix malloc and related names with PREFIX # 申请路径 </span><br><span class="line">–custom-allocator=NAME use a supported custom allocator # 申请名字 </span><br><span class="line">–disable-symver disable symbol versioning # 禁用symver </span><br><span class="line">–enable-hardcoded-tables use hardcoded tables instead of runtime generation # 启 用硬件编码表 </span><br><span class="line">–disable-safe-bitstream-reader # 禁用安全流阅读器 </span><br><span class="line">disable buffer boundary checking in bitreaders </span><br><span class="line">(faster, but may crash) </span><br><span class="line">–sws-max-filter-size=N the max filter size swscale uses </span><br><span class="line"><span class="meta">[$</span><span class="bash">sws_max_filter_size_default] <span class="comment"># 最大过滤器大小N</span></span> </span><br><span class="line">优化选项 </span><br><span class="line">Optimization options (experts only): </span><br><span class="line">–disable-asm disable all assembly optimizations # 禁用全部汇编程序优化 </span><br><span class="line">–disable-altivec disable AltiVec optimizations # 禁用邋AltiVec优化 </span><br><span class="line">–disable-vsx disable VSX optimizations # 急用VSX优化 </span><br><span class="line">–disable-power8 disable POWER8 optimizations # 禁用power8优化 </span><br><span class="line">–disable-amd3dnow disable 3DNow! optimizations # 禁用3D Now!优化 </span><br><span class="line">–disable-amd3dnowext disable 3DNow! extended optimizations # 禁用3D Now!扩展优化 –disable-mmx disable MMX optimizations # 禁用MMX优化 </span><br><span class="line">–disable-mmxext disable MMXEXT optimizations # 禁用MMXEXT优化 </span><br><span class="line">–disable-sse disable SSE optimizations # 禁用SSE优化 </span><br><span class="line">–disable-sse2 disable SSE2 optimizations # 禁用SSE2优化 </span><br><span class="line">–disable-sse3 disable SSE3 optimizations # 禁用SSE3优化 </span><br><span class="line">–disable-ssse3 disable SSSE3 optimizations # 禁用SSSE3优化 </span><br><span class="line">–disable-sse4 disable SSE4 optimizations # 禁用SSE4优化 </span><br><span class="line">–disable-sse42 disable SSE4.2 optimizations # 禁用SSE4.2优化 </span><br><span class="line">–disable-avx disable AVX optimizations # 禁用AVX优化 </span><br><span class="line">–disable-xop disable XOP optimizations # 禁用XOP优化 </span><br><span class="line">–disable-fma3 disable FMA3 optimizations # 禁用FMA3优化 </span><br><span class="line">–disable-fma4 disable FMA4 optimizations # 禁用FMA4优化 </span><br><span class="line">–disable-avx2 disable AVX2 optimizations # 禁用AVX2优化 </span><br><span class="line">–disable-aesni disable AESNI optimizations # 禁用AESNI优化 </span><br><span class="line">–disable-armv5te disable armv5te optimizations # 禁用armv5te优化 </span><br><span class="line">–disable-armv6 disable armv6 optimizations # 禁用armv6优化 </span><br><span class="line">–disable-armv6t2 disable armv6t2 optimizations # 禁用armv6t2优化 </span><br><span class="line">–disable-vfp disable VFP optimizations # 禁用VFP优化 </span><br><span class="line">–disable-neon disable NEON optimizations # 禁用NEON优化</span><br><span class="line">–disable-inline-asm disable use of inline assembly # 禁用内部组合优化 </span><br><span class="line">–disable-yasm disable use of nasm/yasm assembly # 禁用nasm/yasm组合 </span><br><span class="line">–disable-mipsdsp disable MIPS DSP ASE R1 optimizations # 禁用MIPS DSP ASE R1优化 –disable-mipsdspr2 disable MIPS DSP ASE R2 optimizations # 禁用MIPS DSP ASE R2优化 –disable-msa disable MSA optimizations # 禁用MSA优化 </span><br><span class="line">–disable-mipsfpu disable floating point MIPS optimizations # 禁用浮点MIPS优化 </span><br><span class="line">–disable-mmi disable Loongson SIMD optimizations # 禁用长SIMD优化 </span><br><span class="line">–disable-fast-unaligned consider unaligned accesses slow # 禁用快速非对齐，非对齐速度 慢 </span><br><span class="line">开发选项 </span><br><span class="line">Developer options (useful when working on FFmpeg itself): </span><br><span class="line">–disable-debug disable debugging symbols # 禁用调试符号 </span><br><span class="line">–enable-debug=LEVEL set the debug level [$debuglevel] # 禁用调试等级 </span><br><span class="line">–disable-optimizations disable compiler optimizations # 禁用编译器优化 </span><br><span class="line">–enable-extra-warnings enable more compiler warnings # 启用编译器警告 </span><br><span class="line">–disable-stripping disable stripping of executables and shared libraries # 禁用可 执行程序剥脱共享库 </span><br><span class="line">–assert-level=level 0(default), 1 or 2, amount of assertion testing, # 启用段保护等 级 </span><br><span class="line">2 causes a slowdown at runtime. </span><br><span class="line">–enable-memory-poisoning fill heap uninitialized allocated space with arbitrary data # 启用内存填充，用任意数填充 </span><br><span class="line">–valgrind=VALGRIND run “make fate” tests through valgrind to detect memory # 启用 内存检测 </span><br><span class="line">leaks and errors, using the specified valgrind binary. </span><br><span class="line">Cannot be combined with –target-exec </span><br><span class="line">–enable-ftrapv Trap arithmetic overflows # 启用算术运算溢出 </span><br><span class="line">–samples=PATH location of test samples for FATE, if not set use # 指定测试示例位置 \$FATE_SAMPLES at make invocation time. </span><br><span class="line">–enable-neon-clobber-test check NEON registers for clobbering (should be # 启用 neon clobber测试 </span><br><span class="line">used only for debugging purposes) </span><br><span class="line">–enable-xmm-clobber-test check XMM registers for clobbering (Win64-only; # 启用 xmm clobber测试 </span><br><span class="line">should be used only for debugging purposes) </span><br><span class="line">–enable-random randomly enable/disable components # 启用组件随机开启或关闭 </span><br><span class="line">–disable-random # 禁用组件随机开启或关闭 </span><br><span class="line">–enable-random=LIST randomly enable/disable specific components or # 启用随机列表 –disable-random=LIST component groups. LIST is a comma-separated list # 禁用随机列 表 </span><br><span class="line">of NAME[:PROB] entries where NAME is a component </span><br><span class="line">(group) and PROB the probability associated with </span><br><span class="line">NAME (default 0.5). </span><br><span class="line">–random-seed=VALUE seed value for –enable/disable-random # 启用随机种子值 </span><br><span class="line">–disable-valgrind-backtrace do not print a backtrace under Valgrind </span><br><span class="line">(only applies to –disable-optimizations builds) # 禁用valgrind内存分析追踪</span><br></pre></td></tr></table></figure>


<h4 id="3-FFMPEG各模块简述"><a href="#3-FFMPEG各模块简述" class="headerlink" title="3.FFMPEG各模块简述"></a>3.FFMPEG各模块简述</h4><blockquote>
<p>FFmpeg是一套可以用来记录、转换数字音频、视频，并能将其转化为流的开源计算机程序。它包括了领先的 音/视频编码库libavcodec等。<br>libavformat：用于各种音视频封装格式的生成和解析，包括获取解码所需信息以生成解码上下文结构和读取 音视频帧等功能；<br>libavcodec：用于各种类型声音/图像编解码；<br>libavutil：包含一些公共的工具函数；<br>libswscale：用于视频场景比例缩放、色彩映射转换；<br>libpostproc：用于后期效果处理；</p>
</blockquote>
<h4 id="4-编译ffmpeg"><a href="#4-编译ffmpeg" class="headerlink" title="4.编译ffmpeg"></a>4.编译ffmpeg</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --disable-x86asm</span><br></pre></td></tr></table></figure>


<p>编译成功后的脚本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 首先定义一个NDK目录的变量 NDK_ROOT</span></span><br><span class="line">NDK_ROOT=/home/jackou/tools/android-ndk-r17c</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 此变量执行ndk中的交叉编译gcc所在目录</span></span><br><span class="line">TOOLCHAIN=$NDK_ROOT/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">从as的 externalNativeBuild/xxx/build.ninja，  反正下面的配置，可以压制警告的意思</span></span><br><span class="line"><span class="meta">#</span><span class="bash">FLAGS=<span class="string">&quot;-isystem <span class="variable">$NDK_ROOT</span>/sysroot/usr/include/aarch64-linux-android -D__ANDROID_API__=21 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -march=arm64-v8a -mfloat-abi=softfp -mfpu=vfpv3-d16 -mthumb -Wa,--noexecstack -Wformat -Werror=format-security  -O0 -fPIC&quot;</span></span></span><br><span class="line"></span><br><span class="line">FLAGS=&quot;-isystem $NDK_ROOT/sysroot/usr/include/aarch64-linux-android -D__ANDROID_API__=21 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -march=armv8-a -mfloat-abi=softfp -mfpu=vfpv3-d16 -mthumb -Wa,--noexecstack -Wformat -Werror=format-security -O0 -fPIC&quot;</span><br><span class="line"></span><br><span class="line">INCLUDES=&quot; -isystem $NDK_ROOT/sources/android/support/include&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.定义编译后，所存放的目录</span></span><br><span class="line">PREFIX=./android/arm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.--enable-small 优化大小 非常重要，必须优化才行的哦</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.--disable-programs 不编译ffmpeg程序（命令行工具），我们是需要获取静态、动态库</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4.--disable-avdevice 关闭avdevice模块，此模块在android中无用</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.--disable-encoders 关闭所有编码器（播放不需要编码）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6.--disable-muxers 关闭所有复用器（封装器），不需要生成mp4这样的文件，所有关闭</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7.--disable-filters 关闭所有滤镜</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 8.--enable-cross-compile 开启交叉编译（ffmpeg是跨平台的，注意：并不是所有库都有这么happy的选项）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 9.--cross-prefix 看右边的值就知道是干嘛的，gcc的前缀..</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 10.disable-shared / enable-static 这个不写也可以，默认就是这样的，（代表关闭动态库，开启静态库）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 11.--sysroot 寻找NDK所有的库</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 12.--extra-cflags 会传给gcc的参数</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 13.--arch  --target-os</span> </span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">--prefix=$PREFIX \</span><br><span class="line">--enable-small \</span><br><span class="line">--disable-programs \</span><br><span class="line">--disable-avdevice \</span><br><span class="line">--disable-encoders \</span><br><span class="line">--disable-muxers \</span><br><span class="line">--disable-filters \</span><br><span class="line">--enable-cross-compile \</span><br><span class="line">--cross-prefix=$TOOLCHAIN/bin/aarch64-linux-android- \</span><br><span class="line">--disable-shared \</span><br><span class="line">--enable-static \</span><br><span class="line">--sysroot=$NDK_ROOT/platforms/android-21/arch-arm64 \</span><br><span class="line">--extra-cflags=&quot;$FLAGS $INCLUDES&quot; \</span><br><span class="line">--extra-cflags=&quot;-isysroot $NDK_ROOT/sysroot&quot; \</span><br><span class="line">--arch=aarch64 \</span><br><span class="line">--extra-libs=-lgcc \</span><br><span class="line">--target-os=android</span><br><span class="line"></span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>


<p>导入AS中Cmakelist编译脚本</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.4</span>.<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB allCpp *.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(</span><br><span class="line">        native-lib</span><br><span class="line">        SHARED</span><br><span class="line">        <span class="variable">$&#123;allCpp&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_library</span>(</span><br><span class="line">        log-lib</span><br><span class="line">        log)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入FFmpeg的头文件</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入FFmpeg的库文件，设置内部的方式引入，指定库的目录是 -L  指定具体的库-l</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -L$&#123;CMAKE_SOURCE_DIR&#125;/$&#123;CMAKE_ANDROID_ARCH_ABI&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(</span><br><span class="line">        native-lib</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 具体的库文件，链接到总库</span></span><br><span class="line">        <span class="comment"># 这样写会报错，有坑</span></span><br><span class="line">        <span class="comment"># avcodec avfilter avformat avutil swresample swscale</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 先把有依赖的库，先依赖进来</span></span><br><span class="line">        avformat avcodec avfilter avutil swresample swscale</span><br><span class="line"></span><br><span class="line">        <span class="variable">$&#123;log-lib&#125;</span>)</span><br></pre></td></tr></table></figure>


<h4 id="5-Makefile构建系统"><a href="#5-Makefile构建系统" class="headerlink" title="5.Makefile构建系统"></a>5.Makefile构建系统</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里面能够决定编译 Login.c Test.c</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.源文件在的位置。宏函数 my-dir 返回当前目录（包含 Android.mk 文件本身的目录）的路径。</span></span><br><span class="line"><span class="comment"># LOCAL_PATH 其实就是Android.mk文件本身的目录的路径</span></span><br><span class="line">LOCAL_PATH := <span class="variable">$(<span class="built_in">call</span> my-<span class="built_in">dir</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(info &quot;LOCAL_PATH:======== $&#123;LOCAL_PATH&#125;&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.清理</span></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(CLEAR_VARS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO 预编译库的引入 == 提前编译好的库</span></span><br><span class="line">LOCAL_MODULE := getndk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定静态库</span></span><br><span class="line"><span class="comment"># LOCAL_SRC_FILES := libgetndk.a</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定动态库</span></span><br><span class="line">LOCAL_SRC_FILES := libgetndk.so</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预编译静态库的Makeifle脚本</span></span><br><span class="line"><span class="comment"># include $(PREBUILT_STATIC_LIBRARY)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预编译共享库的Makeifle脚本</span></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(PREBUILT_SHARED_LIBRARY)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#引入其他makefile文件。CLEAR_VARS 变量指向特殊 GNU Makefile，可为您清除许多 LOCAL_XXX 变量</span></span><br><span class="line"><span class="comment">#不会清理 LOCAL_PATH 变量</span></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(CLEAR_VARS)</span></span><br><span class="line"><span class="comment"># TODO end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.指定库名字  apk/lib/libMyLoginJar.so  == 总库</span></span><br><span class="line"><span class="comment">#存储您要构建的模块的名称 每个模块名称必须唯一，且不含任何空格</span></span><br><span class="line"><span class="comment">#如果模块名称的开头已是 lib，则构建系统不会附加额外的前缀 lib；而是按原样采用模块名称，并添加 .so 扩展名。</span></span><br><span class="line">LOCAL_MODULE := MyLoginJar</span><br><span class="line"></span><br><span class="line"><span class="comment">#包含要构建到模块中的 C 和/或 C++ 源文件列表 以空格分开</span></span><br><span class="line">LOCAL_SRC_FILES := Login.c \</span><br><span class="line">Test.c</span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO 开始链接进来</span></span><br><span class="line"><span class="comment"># 静态库的链接</span></span><br><span class="line"><span class="comment"># LOCAL_STATIC_LIBRARIES := getndk</span></span><br><span class="line"><span class="comment"># 动态库链接</span></span><br><span class="line">LOCAL_SHARED_LIBRARIES := getndk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入 log</span></span><br><span class="line"><span class="comment">#LOCAL_LDLIBS := -llog</span></span><br><span class="line"><span class="comment"># 链接数学库和log库</span></span><br><span class="line">LOCAL_LDLIBS  := -lm -llog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.动态库</span></span><br><span class="line"><span class="comment">#构建动态库BUILD_SHARED_LIBRARY 最后生成总动态库  ---&gt; apk/lib/armeabi-v7a/libMyLoginJar.so</span></span><br><span class="line"><span class="keyword">include</span> <span class="variable">$(BUILD_SHARED_LIBRARY)</span></span><br><span class="line"><span class="comment"># 静态库</span></span><br><span class="line"><span class="comment"># include $(BUILD_STATIC_LIBRARY)</span></span><br></pre></td></tr></table></figure>


<h4 id="6-Cmake构建工程"><a href="#6-Cmake构建工程" class="headerlink" title="6.Cmake构建工程"></a>6.Cmake构建工程</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>.<span class="number">2</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="string">&quot;ndk28_cmake&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量导入 cpp c源文件</span></span><br><span class="line"><span class="keyword">file</span>(GLOB SOURCE <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/cpp/*.cpp <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/cpp/*.c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加一个库（动态库SHARED，静态库STATIC）</span></span><br><span class="line"><span class="keyword">add_library</span>(native-lib <span class="comment"># 库的名字 ---&gt; libnative-lib.so</span></span><br><span class="line">             SHARED  <span class="comment"># 动态库</span></span><br><span class="line">            <span class="comment"># cpp的源文件：把cpp源文件编译成 libnative-lib.so 库</span></span><br><span class="line">             <span class="variable">$&#123;SOURCE&#125;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 预编译库（已经有了 xxx.so / xxx.a）的导入方式</span></span><br><span class="line"><span class="comment"># TODO 方式一：推荐的方式</span></span><br><span class="line"><span class="comment">#[[</span></span><br><span class="line"><span class="comment"># 第一步：导入fmod头文件</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;/cpp/inc&quot;</span>)</span><br><span class="line"><span class="comment"># 第二步：导入库文件 （方式一）</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -L$&#123;CMAKE_SOURCE_DIR&#125;/jniLibsaaa/$&#123;CMAKE_ANDROID_ARCH_ABI&#125;&quot;</span>)</span><br><span class="line"><span class="comment"># 第三步链接到总库中去</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( <span class="comment"># native-lib是我们的总库</span></span><br><span class="line">        native-lib <span class="comment"># 被链接的总库</span></span><br><span class="line">        log <span class="comment"># 自动寻找  # 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        fmod <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        fmodL <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        )</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO 方式二：以前更多使用的方式</span></span><br><span class="line"><span class="comment">#[[</span></span><br><span class="line"><span class="comment"># 第一步：导入fmod头文件</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;/cpp/inc&quot;</span>)</span><br><span class="line"><span class="comment"># 第二步：导入库文件 （方式二）</span></span><br><span class="line"><span class="keyword">add_library</span>(fmod SHARED IMPORTED)</span><br><span class="line"><span class="keyword">set_target_properties</span>(fmod PROPERTIES</span><br><span class="line">        IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/jniLibsaaa/<span class="variable">$&#123;CMAKE_ANDROID_ARCH_ABI&#125;</span>/libfmod.so)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(fmodL SHARED IMPORTED)</span><br><span class="line"><span class="keyword">set_target_properties</span>(fmodL PROPERTIES</span><br><span class="line">        IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/jniLibsaaa/<span class="variable">$&#123;CMAKE_ANDROID_ARCH_ABI&#125;</span>/libfmodL.so)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三步链接到总库中去</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>( <span class="comment"># native-lib是我们的总库</span></span><br><span class="line">        native-lib <span class="comment"># 被链接的总库</span></span><br><span class="line">        log <span class="comment"># 自动寻找  # 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        fmod <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        fmodL <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        )</span><br><span class="line"><span class="comment">#]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 判断静态库还是动态库 (静态库会直接Copy到总库，动态库则不会)</span></span><br><span class="line"><span class="comment">#[[</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 下面代码不参与 判断 start</span></span><br><span class="line"><span class="comment"># 第一步：导入fmod头文件</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;$&#123;CMAKE_SOURCE_DIR&#125;/cpp/inc&quot;</span>)</span><br><span class="line"><span class="comment"># 第二步：导入库文件 （方式二）</span></span><br><span class="line"><span class="keyword">add_library</span>(fmod SHARED IMPORTED)</span><br><span class="line"><span class="keyword">set_target_properties</span>(fmod PROPERTIES</span><br><span class="line">        IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/jniLibsaaa/<span class="variable">$&#123;CMAKE_ANDROID_ARCH_ABI&#125;</span>/libfmod.so)</span><br><span class="line"><span class="keyword">add_library</span>(fmodL SHARED IMPORTED)</span><br><span class="line"><span class="keyword">set_target_properties</span>(fmodL PROPERTIES</span><br><span class="line">        IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/jniLibsaaa/<span class="variable">$&#123;CMAKE_ANDROID_ARCH_ABI&#125;</span>/libfmodL.so)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 上面代码不参与 判断 end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## OFF=0=false    ON=1=true</span></span><br><span class="line"><span class="comment"># set(isSTATIC OFF)</span></span><br><span class="line"><span class="keyword">set</span>(isSTATIC <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;isSTATIC&#125;</span>)</span><br><span class="line">    <span class="comment"># 导入静态库</span></span><br><span class="line">    <span class="keyword">add_library</span>(getndk STATIC IMPORTED)</span><br><span class="line">    <span class="comment"># 开始真正导入 静态库   System.loadLibrary(&quot;getndk&quot;); // 如果是动态库，这里需要加载，否则注释</span></span><br><span class="line">    <span class="keyword">set_target_properties</span>(getndk PROPERTIES IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/cpp/libgetndk.a)</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;isSTATIC == static&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>(<span class="variable">$&#123;isSTATIC&#125;</span>)</span><br><span class="line">    <span class="comment"># 导入动态库</span></span><br><span class="line">    <span class="keyword">add_library</span>(getndk SHARED IMPORTED)</span><br><span class="line">    <span class="comment"># 开始真正导入 动态库  System.loadLibrary(&quot;getndk&quot;); // 如果是动态库，这里需要加载，否则注释</span></span><br><span class="line">    <span class="keyword">set_target_properties</span>(getndk PROPERTIES</span><br><span class="line">            IMPORTED_LOCATION <span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/jniLibsaaa/<span class="variable">$&#123;CMAKE_ANDROID_ARCH_ABI&#125;</span>/libgetndk.so)</span><br><span class="line">    <span class="keyword">message</span>(<span class="string">&quot;isSTATIC == shared&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">endif</span>(<span class="variable">$&#123;isSTATIC&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>( <span class="comment"># native-lib是我们的总库</span></span><br><span class="line">        native-lib <span class="comment"># 被链接的总库</span></span><br><span class="line">        log <span class="comment"># 自动寻找  # 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        getndk <span class="comment"># TODO 具体的库 链接到 libnative-lib.so里面去【这个库，有可能是静态库，有可能是动态库】</span></span><br><span class="line">        fmod <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        fmodL <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        )</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># rtmp的时候，就全盘采用 源码构建方式</span></span><br><span class="line"><span class="comment"># TODO &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 依赖源码的方式（已经有了 xxxc / xxx.c / xxx.c ...）的导入方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#引入get子目录下的CMakeLists.txt</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(<span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/cpp/libget)</span><br><span class="line"></span><br><span class="line"><span class="comment">#引入count子目录下的CMakeLists.txt</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(<span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/cpp/libcount)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>( <span class="comment"># native-lib是我们的总库</span></span><br><span class="line">        native-lib <span class="comment"># 被链接的总库</span></span><br><span class="line">        log <span class="comment"># 自动寻找  # 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        get <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        count <span class="comment"># 具体的库 链接到 libnative-lib.so里面去</span></span><br><span class="line">        )</span><br></pre></td></tr></table></figure>


<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 子目录下的cmakelist</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>.<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB SOURCE *.cpp)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(</span><br><span class="line">        count</span><br><span class="line">        SHARED <span class="comment"># 最终生成 libcount.so</span></span><br><span class="line">        <span class="variable">$&#123;SOURCE&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>.<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">file</span>(GLOB SOURCE *.c)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>(</span><br><span class="line">        get</span><br><span class="line">        STATIC <span class="comment"># 最终生成 libget.a</span></span><br><span class="line">        <span class="variable">$&#123;SOURCE&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 旧版本日志输出到output.txt中，新版本输出到/.cxx/cmake/debug/armeabi-v7a/metadata_generation_stderr.txt或者cmake_server_log.txt中</span></span><br><span class="line"><span class="comment"># (无) = 重要消息；</span></span><br><span class="line"><span class="comment"># STATUS = 非重要消息；</span></span><br><span class="line"><span class="comment"># WARNING = CMake 警告, 会继续执行；</span></span><br><span class="line"><span class="comment"># AUTHOR_WARNING = CMake 警告 (dev), 会继续执行；</span></span><br><span class="line"><span class="comment"># SEND_ERROR = CMake 错误, 继续执行，但是会跳过生成的步骤；</span></span><br><span class="line"><span class="comment"># FATAL_ERROR = CMake 错误, 终止所有处理过程；</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;this print message!&quot;</span>)</span><br></pre></td></tr></table></figure>


<h4 id="7-Cmake变量"><a href="#7-Cmake变量" class="headerlink" title="7. Cmake变量"></a>7. Cmake变量</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#申明变量</span></span><br><span class="line"><span class="keyword">set</span>(var jack)</span><br><span class="line">messgae(STATUS <span class="variable">$&#123;var&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># CMake中所有变量都是string类型。可以使用set()和unset()命令来声明或移除一个变量 </span></span><br><span class="line"><span class="comment"># 移除变量 </span></span><br><span class="line"><span class="keyword">unset</span>(var) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;my_var = $&#123;var&#125;&quot;</span>) <span class="comment"># 会取不到值，因为被移除了 </span></span><br><span class="line"><span class="comment"># TODO CMake列表（lists） </span></span><br><span class="line"><span class="comment"># 声明列表：set(列表名    值1 值2 ... 值N) 或    set(列表名    &quot;值1;值2;...;值N&quot;) </span></span><br><span class="line"><span class="keyword">set</span>(list_var <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>) <span class="comment"># 字符串列表呢？    CMake中所有变量都是string类型 </span></span><br><span class="line"><span class="comment"># 或者 </span></span><br><span class="line"><span class="keyword">set</span>(list_var2 <span class="string">&quot;1;2;3;4;5&quot;</span>) <span class="comment"># 字符串列表呢？         CMake中所有变量都是string类型 message(&quot;list_var = $&#123;list_var&#125;&quot;) </span></span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;list_var2 = $&#123;list_var2&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO CMake流程控制-条件命令 </span></span><br><span class="line"><span class="comment"># true(1，ON，YES，TRUE，Y，非0的值) </span></span><br><span class="line"><span class="comment"># false(0，OFF，NO，FALSE，N，IGNORE，NOTFOUND) </span></span><br><span class="line"><span class="keyword">set</span>(if_tap <span class="keyword">OFF</span>) <span class="comment"># 定义一个变量if_tap，值为false </span></span><br><span class="line"><span class="keyword">set</span>(elseif_tap <span class="keyword">ON</span>) <span class="comment"># 定义一个变量elseif_tap，值为ture </span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$&#123;if_tap&#125;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;if&quot;</span>) </span><br><span class="line"><span class="keyword">elseif</span>(<span class="variable">$&#123;elseif_tap&#125;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;elseif&quot;</span>) </span><br><span class="line"><span class="keyword">else</span>(<span class="variable">$&#123;if_tap&#125;</span>) <span class="comment"># 可以不加入    $&#123;if_tap&#125; </span></span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;else&quot;</span>) </span><br><span class="line"><span class="comment"># endif($&#123;if_tap&#125;) # 结束if </span></span><br><span class="line"><span class="keyword">endif</span>() <span class="comment"># 结束if 可以不加 </span></span><br><span class="line"><span class="comment"># 注意：elseif和else部分是可选的，也可以有多个elseif部分，缩进和空格对语句解析没有影响</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># TODO CMake流程控制-循环命令 </span></span><br><span class="line"><span class="keyword">set</span>(a <span class="string">&quot;&quot;</span>) </span><br><span class="line"><span class="comment">#  a STREQUAL &quot;xxx&quot;（a等不等xxx，不等于） </span></span><br><span class="line"><span class="comment">#  NOT == ! </span></span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">NOT</span> a <span class="keyword">STREQUAL</span> <span class="string">&quot;xxx&quot;</span>) </span><br><span class="line"><span class="keyword">set</span>(a <span class="string">&quot;$&#123;a&#125;x&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;a = $&#123;a&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endwhile</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># break()命令可以跳出整个循环 </span></span><br><span class="line"><span class="comment"># continue()可以继续当前循环</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(item <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;1item = $&#123;item&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endforeach</span>(item) <span class="comment"># 结束for</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(item RANGE <span class="number">2</span>) <span class="comment"># RANGE 默认从0开始，    所以是：0 1 2 </span></span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;2item = $&#123;item&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endforeach</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(item RANGE <span class="number">1</span> <span class="number">6</span> <span class="number">2</span>) <span class="comment">#  1 3 5 每次跳级2 </span></span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;3item = $&#123;item&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endforeach</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(list_va3 <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>) <span class="comment"># 列表 </span></span><br><span class="line"><span class="comment"># foreach(item IN LISTS $&#123;list_va3&#125;) 没有报错，没有循环 </span></span><br><span class="line"><span class="keyword">foreach</span>(item IN LISTS list_va3) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;4item = $&#123;item&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endforeach</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数定义</span></span><br><span class="line"><span class="comment"># TODO CMake自定义函数         Shell的函数很类似 </span></span><br><span class="line"><span class="comment">#[[ </span></span><br><span class="line">ARGC：表示传入参数的个数 </span><br><span class="line">ARGV0：表示第一个参数，ARGV1、ARGV2以此类推即可 </span><br><span class="line">ARGV：表示所有参数 </span><br><span class="line"><span class="comment">#]] </span></span><br><span class="line"><span class="keyword">function</span>(num_method n1 n2 n3) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;call num_method method&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;n1 = $&#123;n1&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;n2 = $&#123;n2&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;n3 = $&#123;n3&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;ARGC = $&#123;ARGC&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">message</span>(<span class="string">&quot;arg1 = $&#123;ARGV0&#125; arg2 = $&#123;ARGV1&#125; arg3 = $&#123;ARGV2&#125;&quot;</span>) <span class="keyword">message</span>(<span class="string">&quot;all args = $&#123;ARGV&#125;&quot;</span>) </span><br><span class="line"><span class="keyword">endfunction</span>(num_method) </span><br><span class="line">num_method(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>) <span class="comment"># 调用num_method函数</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/10058d760200">Jack Ou</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/10058d760200">https://www.jianshu.com/u/10058d760200</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">此文章版权归Jack Ou所有，如有转载，请註明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/NDK/">NDK</a><a class="post-meta__tags" href="/tags/ffmpeg/">ffmpeg</a></div><div class="post_share"><div class="social-share" data-image="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://upload-images.jianshu.io/upload_images/13838098-2431fc1f0eb1b702.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank"><img class="post-qr-code-img" src="https://upload-images.jianshu.io/upload_images/13838098-2431fc1f0eb1b702.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://upload-images.jianshu.io/upload_images/13838098-ea2cb9b10bc2f743.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank"><img class="post-qr-code-img" src="https://upload-images.jianshu.io/upload_images/13838098-ea2cb9b10bc2f743.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/07/13/Retrofit%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97/"><img class="prev-cover" src="https://upload-images.jianshu.io/upload_images/13838098-e34fb51997ae33f5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Retrofit原理解析-网络模块</div></div></a></div><div class="next-post pull-right"><a href="/2021/07/10/Ubunt%E4%B8%8BNDK%E7%BC%96%E8%AF%91%E6%89%8B%E9%A1%BA/"><img class="next-cover" src="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Ubunt下NDK编译手顺</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/06/19/智能指针/" title="智能指针"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-d96f29e6cfc6c63d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-19</div><div class="title">智能指针</div></div></a></div><div><a href="/2021/05/19/1-C-面向对象/" title="(1)C++面向对象"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-dc6d7cc65659c816.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-19</div><div class="title">(1)C++面向对象</div></div></a></div><div><a href="/2021/05/09/C基础回顾-指针相关知识点/" title="C基础回顾--指针相关知识点"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-8b17e561a07be52d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-09</div><div class="title">C基础回顾--指针相关知识点</div></div></a></div><div><a href="/2021/07/10/Ubunt下NDK编译手顺/" title="Ubunt下NDK编译手顺"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-10</div><div class="title">Ubunt下NDK编译手顺</div></div></a></div><div><a href="/2021/06/19/fmod变声测试demo/" title="fmod变声测试demo"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-19</div><div class="title">fmod变声测试demo</div></div></a></div><div><a href="/2021/06/06/this原理与友元函数/" title="this原理与友元函数"><img class="cover" src="https://upload-images.jianshu.io/upload_images/13838098-d96f29e6cfc6c63d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-06</div><div class="title">this原理与友元函数</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://upload-images.jianshu.io/upload_images/13838098-a7dfe0e9d3ed649c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Jack Ou</div><div class="author-info__description">努力成为靠谱之人：凡事有交代，件件有着落，事事有回音</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">168</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">120</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://www.jianshu.com/u/10058d760200"><i class="fad fa-sheep"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/oujie123" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.jianshu.com/u/10058d760200" target="_blank" title="简书"><i class="fas fa-book-open"></i></a><a class="social-icon" href="https://blog.csdn.net/u010248147" target="_blank" title="CSDN"><i class="fab fa-microblog"></i></a><a class="social-icon" href="mailto:jackou4work@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎收看我的博客，很高兴与您一同成长！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BDffmpeg"><span class="toc-number">1.</span> <span class="toc-text">1.下载ffmpeg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9%E8%AF%B4%E6%98%8E"><span class="toc-number">2.</span> <span class="toc-text">2.编译选项说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-FFMPEG%E5%90%84%E6%A8%A1%E5%9D%97%E7%AE%80%E8%BF%B0"><span class="toc-number">3.</span> <span class="toc-text">3.FFMPEG各模块简述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BC%96%E8%AF%91ffmpeg"><span class="toc-number">4.</span> <span class="toc-text">4.编译ffmpeg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Makefile%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F"><span class="toc-number">5.</span> <span class="toc-text">5.Makefile构建系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Cmake%E6%9E%84%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">6.Cmake构建工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Cmake%E5%8F%98%E9%87%8F"><span class="toc-number">7.</span> <span class="toc-text">7. Cmake变量</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/20/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%90%86%E8%A7%A3Linux%E8%BD%AF%E4%B8%AD%E6%96%AD/" title="CPU性能篇-理解Linux软中断"><img src="https://upload-images.jianshu.io/upload_images/13838098-f15188c53cac98cc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU性能篇-理解Linux软中断"/></a><div class="content"><a class="title" href="/2022/03/20/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%90%86%E8%A7%A3Linux%E8%BD%AF%E4%B8%AD%E6%96%AD/" title="CPU性能篇-理解Linux软中断">CPU性能篇-理解Linux软中断</a><time datetime="2022-03-20T08:53:13.000Z" title="发表于 2022-03-20 16:53:13">2022-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/19/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%8F%AF%E4%B8%AD%E6%96%AD%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%A1%88%E4%BE%8B-%E4%B8%8B/" title="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例_下"><img src="https://upload-images.jianshu.io/upload_images/13838098-f15188c53cac98cc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例_下"/></a><div class="content"><a class="title" href="/2022/03/19/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%8F%AF%E4%B8%AD%E6%96%AD%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%A1%88%E4%BE%8B-%E4%B8%8B/" title="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例_下">CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例_下</a><time datetime="2022-03-19T13:54:05.000Z" title="发表于 2022-03-19 21:54:05">2022-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/27/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%8F%AF%E4%B8%AD%E6%96%AD%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%A1%88%E4%BE%8B/" title="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例"><img src="https://upload-images.jianshu.io/upload_images/13838098-f15188c53cac98cc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例"/></a><div class="content"><a class="title" href="/2022/01/27/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%87%BA%E7%8E%B0%E5%A4%A7%E9%87%8F%E4%B8%8D%E5%8F%AF%E4%B8%AD%E6%96%AD%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E5%A4%84%E7%90%86%E6%A1%88%E4%BE%8B/" title="CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例">CPU性能篇-系统中出现大量不可中断进程和僵尸进程处理案例</a><time datetime="2022-01-27T07:29:07.000Z" title="发表于 2022-01-27 15:29:07">2022-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/26/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E8%BF%90%E8%A1%8C%E7%9F%AD%E6%97%B6%E8%BF%9B%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E5%8F%8D%E5%A4%8D%E5%B4%A9%E6%BA%83%E8%87%B4%E4%BD%BFCPU%E5%8D%A0%E7%94%A8%E9%AB%98/" title="CPU性能篇-运行短时进程和进程反复崩溃致使CPU占用高"><img src="https://upload-images.jianshu.io/upload_images/13838098-f15188c53cac98cc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU性能篇-运行短时进程和进程反复崩溃致使CPU占用高"/></a><div class="content"><a class="title" href="/2022/01/26/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E8%BF%90%E8%A1%8C%E7%9F%AD%E6%97%B6%E8%BF%9B%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E5%8F%8D%E5%A4%8D%E5%B4%A9%E6%BA%83%E8%87%B4%E4%BD%BFCPU%E5%8D%A0%E7%94%A8%E9%AB%98/" title="CPU性能篇-运行短时进程和进程反复崩溃致使CPU占用高">CPU性能篇-运行短时进程和进程反复崩溃致使CPU占用高</a><time datetime="2022-01-26T07:19:57.000Z" title="发表于 2022-01-26 15:19:57">2022-01-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/25/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3CPU%E4%BD%BF%E7%94%A8%E7%8E%87/" title="CPU性能篇-深入理解CPU使用率"><img src="https://upload-images.jianshu.io/upload_images/13838098-f15188c53cac98cc.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU性能篇-深入理解CPU使用率"/></a><div class="content"><a class="title" href="/2022/01/25/CPU%E6%80%A7%E8%83%BD%E7%AF%87-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3CPU%E4%BD%BF%E7%94%A8%E7%8E%87/" title="CPU性能篇-深入理解CPU使用率">CPU性能篇-深入理解CPU使用率</a><time datetime="2022-01-24T16:28:42.000Z" title="发表于 2022-01-25 00:28:42">2022-01-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://upload-images.jianshu.io/upload_images/13838098-dd17b53777a91fd0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Jack Ou</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://oujie123.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.spacingElementById('content-inner')
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.spacingElementById('content-inner')
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script></div></body></html>